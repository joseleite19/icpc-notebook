\documentclass[letterpaper,10pt,oneside,footsepline, landscape]{article}
% \setcounter{secnumdepth}{-1} 

\usepackage{amsmath,amssymb, amsbsy}
\usepackage{fix-cm}
\usepackage{paralist}
\usepackage{courier}
\usepackage{graphicx}
\usepackage{color}
\usepackage{pdflscape}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{framed}
\usepackage[inline]{enumitem}
\usepackage{verbatim}
\usepackage{pxfonts}
\usepackage{algorithm2e}
\usepackage{algpseudocode}
\usepackage{pdflscape}
\usepackage{titlesec}
\usepackage{paralist}
\usepackage[parfill]{parskip}
\usepackage{setspace}


\usepackage[inline]{enumitem}
\usepackage[parfill]{parskip}
\usepackage[dvipsnames]{xcolor}
\usepackage[normalem]{ulem}
\usepackage[strict]{changepage}

\usepackage[hmargin={0.5cm, 0.5cm}, vmargin={1.4cm, 1.0cm}]{geometry}
\usepackage{multicol}
\usepackage{fancyhdr}

\usepackage{bashful}


\titlespacing*{\section}{0pt}{-10pt}{-5pt}
\titlespacing*{\subsubsection}{0pt}{0pt}{0pt}
\titleformat{\section}{\normalfont\fontsize{12}{15}\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\fontsize{10}{10}\bfseries}{\thesubsection}{1em}{}

\newcommand{\setcodespacing}{\titlespacing*{\subsection}{0pt}{-10pt}{-10pt}}
\newcommand{\setnormalspacing}{\titlespacing*{\subsection}{0pt}{0pt}{-5pt}}

\pagestyle{fancy}

\renewcommand{\sectionmark}[1]{\markboth{#1}{}}
\renewcommand{\subsectionmark}[1]{\markright{#1}}

\fancyhf{}
\rhead{\leftmark, \thepage}

\lhead{University of Brasilia}

\usepackage{titlesec}

\definecolor{dkgray}{rgb}{0.4,0.4,0.4}
\definecolor{gray}{rgb}{0.6,0.6,0.6}
\definecolor{dkgreen}{rgb}{0,0.6,0}
% \definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\definecolor{mygreen}{HTML}{007000}
\definecolor{myblue}{HTML}{0000dd}

\definecolor{mymyblue}{HTML}{005cc5}

\definecolor{myred}{HTML}{d73a49}
\definecolor{myblack}{HTML}{24292e}
\definecolor{mygray}{HTML}{6a737d}

\lstset{
	language=C++,
	tabsize=2,
	frame=t,
	aboveskip=3pt,
	belowskip=2pt,
	showstringspaces=false,
	columns=fullflexible,
	numbers=none,
	%breakatwhitespace=true,
	breaklines=true,
	breakindent=12pt,
	inputencoding=utf8,
	emptylines=*1,
	showstringspaces=false,
	postbreak=\raisebox{0ex}[0ex][0ex]{\color{lightgray}\ensuremath{\hookrightarrow}},
	basicstyle=\scriptsize\ttfamily,
	identifierstyle=\color{black},
	commentstyle=\color{gray}\itshape,
	showtabs=true,
	tab={\color{dkgray}{\tiny $\vartriangleright$}\hfill},
}

\newcommand{\includes}[2]{
	\setcodespacing
	
	\immediate\write18{echo "$(cat #2 | cpp -dD -P -fpreprocessed | tr -d [:space:] | md5sum | cut -d ' ' -f1), $(cat #2 | grep -c ^) lines" > __mytempfile}
	%\subsection{#1}
	
	{\subsection[#1]{#1} {\scriptsize\protect\input{__mytempfile}}}
	%\immediate{\small \input{__mytempfile}}

	\immediate\write18{rm __mytempfile}
	
	\setnormalspacing

	\lstinputlisting{#2}
}
\newcommand{\includess}[2]{
	\subsubsection{#1}
	\lstinputlisting{#2}
}

\setlength{\columnseprule}{1pt}

\date{}
\title{Rock Lee do Pagode Namora D+}
%\title{ICPC Team Reference}
\author{University of Brasilia}

\begin{document}
\maketitle
\begin{multicols}{3}
\tableofcontents
% \newpage
\thispagestyle{fancy}

\lstinputlisting[language=bash]{vimrc}

\lstinputlisting[language=bash]{bashrc}

\lstinputlisting{code/template.cpp}

\section{Data Structures}
\includes{Fenwick Tree 2D}{code/ed/bit2D.cpp}
\includes{Wavelet Tree}{code/ed/wavelet_tree.cpp}
\includes{Order Set}{code/ed/order_set.cpp}
\includes{Hash table}{code/ed/hash_table.cpp}
\includes{Convex Hull Trick Simple}{code/ed/cht_simple.cpp}
\includes{Convex Hull Trick}{code/ed/cht.cpp}
\includes{Convex Hull Trick}{code/ed/LineContainer.cpp}
\includes{Min queue}{code/ed/minq.cpp}
\includes{Sparse Table}{code/ed/sparse_table.cpp}
\includes{Treap}{code/ed/treap.cpp}
\includes{ColorUpdate}{code/misc/ColorUpdate.cpp}
\includes{Heavy Light Decomposition}{code/ed/hld.cpp}
\includes{Iterative Segtree}{code/ed/segtree.cpp}
\includes{LiChao's Segtree}{code/ed/lichao.cpp}
\includes{Palindromic tree}{code/ed/eertree.cpp}

\section{Math}
\includes{Extended Euclidean Algorithm}{code/math/euclides.cpp}
\includes{Chinese Remainder Theorem}{code/math/crt.cpp}
\includes{Diophantine Solver}{code/math/diophantine.cpp}
\includes{Preffix inverse}{code/math/inv.cpp}
\includes{Pollard Rho}{code/math/pollard_rho.cpp}
\includes{Miller Rabin}{code/math/miller_rabin.cpp}
\includes{Primitive root}{code/math/primitive_root.cpp}
\includes{Mobius Function}{code/math/mobius.cpp}
\includes{Mulmod TOP}{code/math/mod.cpp}
\includes{Modular multiplication TOPPER}{code/math/fast_mul_mod.cpp}
\includes{Division Trick}{code/math/division_trick.cpp}
\includes{Matrix Determinant}{code/math/det.cpp}
\includes{Simplex Method}{code/math/simplex.cpp}
\includes{FFT}{code/fft.cpp}
\includes{FFT Tourist}{code/fft_tourist.cpp}
\includes{NTT}{code/ntt.cpp}
\includes{Gauss}{code/gauss.cpp}
\includes{Gauss Xor}{code/gauss_xor.cpp}
\includes{Simpson}{code/math/simpson.cpp}
\includes{Matrix}{code/math/matrix.cpp}

\section{Graphs}
\includes{Bipartite Matching}{code/graph/bipartite_matching.cpp}
\includes{Dinic}{code/graph/dinic.cpp}
\includes{Push relabel}{code/graph/pushrelabel.cpp}
\includes{Min Cost Max Flow}{code/graph/mcmf.cpp}
\includes{Blossom Algorithm for General Matching}{code/graph/blossom.cpp}
\includes{Blossom Algorithm for Weighted General Matching}{code/graph/weight_blossom.cpp}
\includes{Small to Large}{code/graph/stl.cpp}
\includes{Kosaraju}{code/graph/kosaraju.cpp}
\includes{Tarjan}{code/graph/tarjan.cpp}
\includes{Max Clique}{code/graph/maxcliq.cpp}
\includes{Dominator Tree}{code/graph/dominator_tree.cpp}
\includes{Min Cost Matching}{code/graph/hungarian_mcm.cpp}

\section{Strings}
\includes{Aho Corasick}{code/string/aho_corasick.cpp}
\includes{Suffix Array}{code/string/suffix_array.cpp}
\includes{Adamant Suffix Tree}{code/string/adamant_suffix_tree.cpp}
\includes{Z Algorithm}{code/string/z_algo.cpp}
\includes{Prefix function/KMP}{code/string/pf.cpp}
\includes{Min rotation}{code/string/min_rot.cpp}
\includes{Manacher}{code/string/all_palindrome.cpp}
\includes{Suffix Automaton}{code/string/suffix_automaton.cpp}

\section{Geometry}
\includes{2D basics}{code/geometry/2D.cpp}
\includes{Circle line intersection}{code/geometry/circle_line_intersection.cpp}
\includes{Half plane intersection}{code/geometry/halfplane.cpp}
\includes{Detect empty Half plane intersection}{code/geometry/detect_halfplane.cpp}

\subsection{Circle Circle intersection}
Assume that the first circle is centered at the origin and second at $(x2, y2)$. Find circle line intersection of first circle and line $Ax + By + C = 0$, where $A = -2x_2$, $B = -2y_2$, $C = x_2^2 + y_2^2 + r_1^2 - r_2^2$.

Be aware of corner case with two circles centered at the same point. \\

\includes{Tangents of two circles}{code/geometry/tangents.cpp}
\includes{Convex Hull}{code/geometry/convexhull.cpp}
\includes{Check point inside polygon}{code/geometry/in_poly.cpp}
\includes{Check point inside polygon without lower/upper hull}{code/geometry/in_poly2.cpp}
\includes{Minkowski sum}{code/geometry/mink.cpp}

\subsection{Geo Notes}
\subsubsection{Center of mass}
\textbf{System of points(2D/3D):} Mass weighted average of points. \\
\textbf{Frame(2D/3D):} Get middle point of each segment solve as previously. \\
\textbf{Triangle:} Average of vertices. \\
\textbf{2D Polygon:} Compute \textbf{signed} area and center of mass of triangle $((0, 0), p_i, p_{i+1})$. Then solve as system of points.\\
\textbf{Polyhedron surface:} Solve each face as a 2D polygon(be aware of (0, 0)) then replace each face with its center of mass and solve as system of points. \\
\textbf{Tetrahedron(Triangular pyramid):} As triangles, its the average of points. \\
\textbf{Polyhedron:} Can be done as 2D polygon, but with tetrahedralization intead of triangulation.

\subsubsection{Pick's Theorem}
Given a polygon without self-intersections and all its vertices on integer coordinates in some 2D grid. Let $A$ be its area, $I$ the number of points with integer coordinates stricly inside the polygon and $B$ the number of points with integer coordinates in the border of the polygon. The following formula holds: $A = I + \frac{B}{2} - 1$.

\section{Miscellaneous}
\includes{Cute LIS}{code/misc/lis.cpp}
\includes{Efficient recursive lambda}{code/misc/recursive_lambda.cpp}
\includes{Bitsets}{code/misc/bitset.cpp}
\includes{Buildings}{code/misc/burn.cpp}
\includes{Rand}{code/misc/rand.cpp}
\includes{Klondike}{code/misc/klondike.cpp}
\includes{Hilbert Order}{code/misc/hilbert_order.cpp}
\includes{Modular Factorial}{code/misc/factmod.cpp}
\includes{Iterate over submasks}{code/misc/submasks.cpp}
\includes{Knapsack Bounded with Cost}{code/misc/knapsack_bounded_cost.cpp}
\includes{LCA \textless O(nlgn),O(1)\textgreater}{code/misc/lca.cpp}
\includes{Buffered reader}{code/misc/buffered_reader.cpp}
\includes{Modular summation}{code/misc/sum_mod.cpp}
\includes{Edge coloring CPP}{code/misc/edge_coloring.cpp}

\subsection{Burnside's Lemma}
Let $(G, \oplus)$ be a finite group that acts on a set $X$. It should hold that $e_g*x=x$ and $g_1 *(g_2 * x) = (g_1 \oplus g_2) * x$, $\forall x \in X, g_1, g_2 \in G$. For each $g \in G$ let $X^g = \{x \in X \mid g*x = x \}$. The number of orbits its given by:

$\mid X / G\mid~= \frac{1}{|G|} \sum_{g \in G}{|X^g|}$

\subsection{Wilson's Theorem}
$(n-1)! = -1 \mod n \iff n\text{ is prime}$

\subsection{Fibonacci}
\begin{itemize}
\item $F_{n-1}F_{n+1} - F_n^2 = (-1)^n$
\item $F_{n+k} = F_kF_{n+1} + F_{k-1}F_n$
\item $GCD(F_n, F_m) = F_{GCD(n, m)}$
\item $F_n = \frac{(\frac{1+\sqrt{5}}{2})^n - (\frac{1-\sqrt{5}}{2})^n}{\sqrt{5}}$
\end{itemize}

\subsection{Lucas's Theorem}
For non-negative integers $m$ and $n$ and a prime $p$, the following congruence holds:

$\displaystyle \binom{m}{n} \equiv \prod_{i = 0}^{k} \binom{m_i}{n_i} \pmod p$

where $m_i$ is the i-th digit of $m$ in base $p$. ${\displaystyle {\tbinom {a}{b}}=0}$ if $a < b$.

\subsection{Kirchhoff's Theorem}
Laplacian matrix is $L = D - A$, where $D$ is a diagonal matrix with vertex degrees on the diagonals and $A$ is adjacency matrix.

The number of spanning trees is any cofactor of L. i-th cofactor is determinant of the matrix gotten by removing i-th row and column of L.

\subsubsection{Multigraphs}
In $D[i][i]$ all loops are excluded. $A[i][j]$ = number of edges from $i$ to $j$.

\subsubsection{Directed multigraphs}
$D[i][i]$ = indegree of i minus the number of loops at i. $A[i][j]$ = number of edges from $i$ to $j$.

The number of oriented spanning trees rooted at a vertex i is the determinant of the matrix gotten by removing the ith row and column of L.

\subsection{Matroid}
Let $X$ set of objects, $I \subseteq 2^X$ set of independents sets such that:
\begin{enumerate}
\item $\emptyset \in I$
\item $A \in I, B \subseteq A \implies B \in I$
\item Exchange axiom, $A \in I, B \in I, |B| > |A| \implies \exists x \in B \setminus A : A \cup \{x\} \in I$
\item $A \subseteq X$ and $I$ and $I'$ are maximal independent subsets of A then $|I| = |I'|$
\end{enumerate}
Then $(X, I)$ is a matroid. The combinatorial optimization problem associated with it is: Given a weight $w(e) \geq 0 ~\forall e \in X$, find an independet subset that has the largest possible total weight. \\

\includes{Matroid intersection}{code/matroid.cpp}

Where path(e) = [e] if label[e] = MARK2, path(label[e]) + [e] otherwise.

\subsubsection{Matroid Union}
Given $k$ matroids over the same set of objects $(X, I_1)$, $(X, I_2)$, \dots, $(X, I_k)$ find $A_1 \in I_1$, $A_2 \in I_2$, \dots, $A_k \in I_k$ such that $i \not= j, A_i \cap A_j = \emptyset$ and $|\bigcup\limits_{i=1}^{k} A_i|$ is maximum. Matroid union can be reduced to matroid intersection as follows.

Let $X' = X \times \{1, 2, \dots, k\}$, ie, $k$ copies of each element of $X$ with different colors. $M1 = (X', Q)$ where $B \in Q \iff \forall ~1 \le i \le k, ~\{x\mid (x, i) \in B\} \in I_i$, ie, for each color, $B$ is independent. $M2 = (X', W)$ where $B \in W \iff i \not= j \implies \lnot((x, i) \in B \land (x, j) \in B)$, ie, each element is picked by at most one color.

Intersection of $M1$ and $M2$ is the answer for the combinatorial problem of matroid union.

\subsection{Notes}
When we repeat something and each time we have probability $p$ to succeed then the expected number or tries is $\frac{1}{p}$, till we succeed.

\textbf{Small to large}

\textbf{Trick in statement} If $k$ sets are given you should note that the amount of different set sizes is $O(\sqrt{s})$ where $s$ is total size of those sets. And no more than $\sqrt{s}$ sets have size greater than $\sqrt{s}$. For example, a path to the root in Aho-Corasick through suffix links will have at most $O(\sqrt{s})$ vertices.

\textbf{gcd on subsegment}, we have at most $\log(a_i)$ different values in $\{\gcd(a_j, a_{j+1}, ..., a_i)$ for $j < i\}$.

\textbf{From static set to expandable}. To insert, create a new set with the new element. While there are two sets with same size, merge them. There will be at most $\log(n)$ disjoints sets.

\textbf{Matrix exponentiation optimization}. Save binary power of $A_{nxn}$ and answer $q$ queries $b = A^mx$ in $O((n^3 + qn^2)log(m))$.

\textbf{Ternary search on integers into binary search}, comparing f(mid) and f(mid+1), binary search on derivative

\textbf{Dynamic offline set} For each element we will wind segment of time $[a, b]$ such that element is present in the set during this whole segment. Now we can come up with recursive procedure which handles $[l, r]$ time segment considering that all elements such that $[l, r] \subset [a, b]$ are already included into the set. Now, keeping this invariant we recursively go into $[l, m]$ and $[m+1, r]$ subsegments. Finally when we come into segment of length 1.

$a > b \implies a \mod b < \frac{a}{2}$

\textbf{Convex Hull}. The expected number of points in the convex hull of a random set of points is $O(log(n))$. The number of points in a convex hull with points coordinates limited by $L$ is $O(L^{2/3})$.

\textbf{Tree path query}. Sometimes the linear query is fast enough. Just do adamant's hld sorting subtrees by their size and remap vertices indexes.

\textbf{Range query} offline can be solved by a sweep, ordering queries by R.

Maximal number of divisors of any n-digit number. 7 4, 12, 32, 64, 128, 240, 448, 768, 1344, 2304, 4032, 6720, 10752, 17280, 26880, 41472, 64512, 103680, 161280, 245760, 368640, 552960, 860160, 1290240, 1966080, 2764800, 4128768, 6193152, 8957952, 13271040, 19660800, 28311552, 41287680, 59719680, 88473600, 127401984, 181665792, 264241152, 382205952, 530841600

\end{multicols}


\end{document}
